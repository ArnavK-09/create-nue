function $(S){const{root:J,fn:T,fns:R,deps:j,ctx:N}=S;var F,K,U,C,P,_,Z=[];function L(G){return new Proxy({},{get(E,Y){if(_){const X=C.indexOf(Y);if(X>=0)return G[X]}return Y===C?G:C.includes(Y)?G[Y]:Y==P?U.indexOf(G):N[Y]}})}function V(G,E,Y,X){const M=O({fns:R,dom:J.cloneNode(!0)},L(G),j,N);Z[X?"unshift":"push"](M),M.before(X||F),N.oninsert?.call(N,M.$el,G,{index:E,is_repaint:!!Y,is_first:!E,is_last:E==U.length-1,items:U})}function I(){Z.forEach((G)=>G.unmount()),Z=[],U.forEach(V)}function u(G){const{unshift:E,splice:Y,push:X,sort:M,reverse:q}=G;return Object.assign(G,{push(z){X.call(U,z),V(z,U.length-1)},unshift(z){E.call(U,z),V(z,0,null,Z[0].$el)},sort(z){M.call(U,z),I()},reverse(){q.call(U),I()},splice(z,D){Z.slice(z,z+D).forEach((H)=>H.unmount()),Z.splice(z,D),Y.call(U,z,D)},shift(){G.splice(0,1)},pop(){G.splice(G.length-1,1)},remove(z){const D=U.indexOf(z);if(D>=0)G.splice(D,1)}})}function w(){var G;if([C,G,P,_]=T(N),U){if(G!==K)U=u(G),I(),K=G;return Z.forEach((E)=>E.update())}if(G){const E=J.parentElement;F=new Text(""),E.insertBefore(F,J),E.removeChild(J),U=u(G),G.forEach(V),K=G}}return{update:w}}function h(S){const{root:J,fn:T,fns:R,deps:j,ctx:N}=S,F=[];var K=J,U,C;function P(Z,L){S.processAttrs(Z);const V=O({fns:R,dom:Z},N,j);F.push(V),V.fn=L}P(J,T);while(K=K.nextElementSibling){const Z=K.getAttribute(":else-if");if(Z)P(K,R[Z]),K.removeAttribute(":else-if");else if(K.hasAttribute(":else"))P(K,()=>!0),K.removeAttribute(":else");else{C=K;break}}function _(){if(!U){const L=J.parentElement;U=new Text(""),L.insertBefore(U,J)}const Z=F.find((L)=>L.fn(N));F.forEach((L)=>L==Z?L.before(U):L.unmount())}return{update:_,next:C}}var x=function(S){const J=document.createElement("_");return J.innerHTML=S.trim(),J.firstChild},A=function(S,J=""){return S?.join?S.filter((T)=>T!=null).join(J).trim().replace(/\s+/g," "):S||""},y=function(S,J){if(S==J)return[S];if(!S.join)S=[S];if(J&&!J.join)J=[J];return S.concat(J)},v={":if":h,":for":$},b=["class","style","id"];function O(S,J={},T=[],R={}){if(Array.isArray(S))T=S.slice(1),S=S[0];const{Impl:j,tmpl:N,fns:F=[],dom:K,inner:U}=S,C=[];function P(q){const z=q.nodeType;if(z==3){const[D,H]=/:(\d+):/.exec(q.textContent.trim())||[],Q=F[H];if(Q)C.push(()=>q.textContent=A(Q(M)))}if(z==1){for(let W in v){const B=F[q.getAttribute(W)];if(W==":if"&&B&&q.getAttribute(":for"))if(B(M))continue;else q.removeAttribute(":for");if(B){q.removeAttribute(W);const g=v[W]({root:q,fn:B,fns:F,deps:T,ctx:M,processAttrs:_});return C.push(g.update||g),g}}const D=q.tagName.toLowerCase(),H=q.nextSibling;if(U&&D=="slot")return U.replace(q),{next:H};const Q=T.find((W)=>W.name==D);if(Q){if(q.firstChild){const g=document.createElement("_");g.append(...q.childNodes),Q.inner=O({fns:F,dom:g},M,T)}const W=w(q),B=O(Q,J,T,W).mount(q);if(K?.tagName.toLowerCase()==Q.name)X.$el=B.$el;return C.push(()=>G(B.$el,W)),X.$refs[q.getAttribute("ref")||D]=B.impl,{next:H}}else _(q),V(q,P)}}function _(q){for(let z of[...q.attributes])L(q,z.name,z.value)}function Z(q,z,D){if(q.getAttribute(z)!==D)q.setAttribute(z,D)}function L(q,z,D){if(z=="ref"||z=="name")X.$refs[D]=q;const H=F[D];if(!H)return;const Q=z.slice(1),W=z[0];if(":@$".includes(W))q.removeAttribute(z);if(Q=="attr")return C.push(()=>{for(let[B,g]of Object.entries(H(M)))Z(q,B,g===!0?"":g)});if(W==":"&&Q!="bind")C.push(()=>{let B=H(M);Z(q,Q,A(B))});if(W=="@")q[`on${Q}`]=(B)=>{H.call(M,M,B),E()};if(W=="$")C.push(()=>H(M)?q[Q]=Q:q.removeAttribute(Q));if(Q=="html")C.push(()=>q.innerHTML=H(M))}function V(q,z){let D=q.firstChild;while(D)D=z(D)?.next||D.nextSibling}function I(q,z){const D=F[q.getAttribute(":"+z)];return D?D(M):q.getAttribute(z)||q[z]||void 0}function u(q){const z={};for(let D of[...q.attributes]){const H=D.name.replace(":",""),Q=I(q,H);if(!b.includes(H)&&typeof Q!="object")z[H]=Q==null?!0:Q}return z}function w(q){return q.$attrs=u(q),new Proxy(q,{get(z,D){return I(q,D)}})}function G(q,z){const D=y(I(q,"class")||[],z.class);if(D[0])q.className=A(D," ");const{id:H,style:Q}=z;if(Q&&Q.x!="")q.style=A(Q);if(H)q.id=A(H)}function E(q){if(q)Object.assign(Y,q);return C.map((z)=>z()),Y.updated?.call(M,M),X}let Y={};const X={update:E,$el:K,get root(){return X.$el},$refs:{},$parent:R,impl:Y,mount(q){const z=K||(X.$el=x(N));let D=q.querySelector("script");if(D)Object.assign(J,JSON.parse(D.textContent)),q.insertAdjacentElement("afterend",D);if(j)Y=X.impl=new j(M),Y.$refs=X.$refs,Y.update=E;P(z),q.replaceWith(z);for(let H of[...q.attributes])Z(z,H.name,H.value);return Y.mounted?.call(M,M),E()},replace(q){P(K),q.replaceWith(...K.children),E()},before(q){if(K){if(X.$el=K,q.before(K),!K.walked)P(K),K.walked=1;return E()}},unmount(){X.root.remove(),Y.unmounted?.call(M,M),E()}},M=new Proxy({},{get(q,z){for(let D of[X,Y,J,R,R.bind]){const H=D&&D[z];if(H!=null)return H}},set(q,z,D){if(R&&R[z]!==void 0)R[z]=D,R.update();else X[z]=D;return!0}});return X}export{O as default,O as createApp};
